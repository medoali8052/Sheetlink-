<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Product â€” Sheetlink</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ğŸ”¹ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ù…Ù†ØªØ¬ */
    .product-image {
      width: 100%;
      max-width: 794px;
      aspect-ratio: 1 / 1; /* ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø±Ø¨Ø¹ */
      object-fit: cover; /* ÙŠÙ‚Øµ Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø¯Ù„ Ù…Ø§ ÙŠÙ…Ø¯Ù‡Ø§ */
      border-radius: 16px;
      margin: 0 auto;
      display: block;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <main class="max-w-4xl mx-auto p-6">
    <a href="/" class="text-blue-600 hover:underline">â† Back to products</a>

    <div id="product" class="mt-6"></div>

    <section class="mt-10">
      <h2 class="text-xl font-semibold mb-3">Ù…Ù†ØªØ¬Ø§Øª Ø£Ø®Ø±Ù‰</h2>
      <div id="others" class="grid sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
    </section>
  </main>

  <script>
  async function loadProduct() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');
    if (!id) return document.getElementById('product').innerHTML = '<p>Product not found</p>';

    try {
      const res = await fetch('products.json?cache=' + Date.now());
      const data = await res.json();
      const product = data.find(p => String(p.id) === String(id));
      if (!product) {
        document.getElementById('product').innerHTML = '<p>Product not found</p>';
        return;
      }

      // âœ… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ø±Ø¨Ø¹Ø© ÙˆÙ…Ù†Ø³Ù‚Ø©
      document.getElementById('product').innerHTML = `
        <div class="bg-white p-6 rounded-2xl shadow">
          <img src="${product.image}" alt="${product.name}" class="product-image" />
          <h1 class="text-2xl font-bold mt-4">${product.name}</h1>
          <div class="text-lg text-gray-700 mb-2">${product.price}</div>
          <p class="text-gray-600 mb-4">${product.description}</p>

          ${product.youtube ? `
            <div class="aspect-video mb-4">
              <iframe class="w-full h-full rounded-xl" src="${product.youtube.replace('watch?v=', 'embed/')}" frameborder="0" allowfullscreen></iframe>
            </div>` : ''}

          ${product.link ? `
            <a href="${product.link}" target="_blank" class="bg-green-600 text-white px-6 py-2 rounded-lg">Ø§Ø´ØªØ±Ù Ø§Ù„Ø¢Ù†</a>` : ''}
        </div>
      `;

      // âœ… Ù…Ù†ØªØ¬Ø§Øª Ø£Ø®Ø±Ù‰ (Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„)
      const others = data.filter(p => String(p.id) !== String(id)).slice(0, 6);
      document.getElementById('others').innerHTML = others.map(p => `
        <a href="product.html?id=${p.id}" class="block bg-white rounded-xl shadow hover:shadow-lg transition">
          <img src="${p.image}" class="w-full h-48 object-cover rounded-t-xl" />
          <div class="p-3">
            <div class="font-semibold">${p.name}</div>
            <div class="text-sm text-gray-500">${p.price}</div>
          </div>
        </a>
      `).join('');
    } catch (err) {
      console.error(err);
      document.getElementById('product').innerHTML = '<p>Error loading product</p>';
    }
  }

  loadProduct();
  </script>
</body>
</html>
